const int LED = 13;
const int STATE_ON = 1;
const int STATE_OFF = 0;

// 赤外線リモコンのOFF・ONデータ
int data [2][275] = {
  {1000,200,99,552,97,154,47,153,47,54,48,54,48,54,48,51,50,48,53,54,48,154,46,53,48,54,47,54,48,54,47,48,53,49,53,153,47,53,48,153,47,53,48,53,48,54,48,48,53,48,53,53,48,53,48,54,48,54,48,54,48,54,48,48,53,48,53,54,48,54,48,154,46,54,48,153,47,153,47,48,53,153,47,150,50,48},
  {338,169,42,42,41,42,42,42,42,42,41,43,41,42,41,127,41,43,41,43,41,43,41,42,42,43,41,43,40,43,41,43,41,43,41,42,42,42,41,127,42,42,42,127,42,42,42,42,41,43,40,43,41,43,41,42,42,42,41,43,41,42,42,43,41,127,41,128,40,42,41,43,41,43,41,43,41,43,40,43,41,127,42,42,41,127,41,43,41,43,41,43,41,42,42,42,42,126,42,42,41,44,40,127,41,127,41,43,41,127,41,42,41,42,42,43,40,43,41,43,40,42,42,127,41,128,40,127,41,127,42,127,41,127,42,42,41,42,42,43,41,127,41,42,42,42,41,127,42,127,41,42,41,127,41,127,41,42,42,127,41,42,41,127,41,127,41,44,40,127,41,127,41,42,41,127,42,43,41,42,41,127,41,42,41,127,42,42,41,127,41,44,40,127,41,127,41,127,41,42,42,42,41,42,41,127,42,127,41,42,41,127,41,44,40,43,41,42,42,42,42,42,41,43,41,42,42,42,41,43,41,43,41,42,41,127,41,42,42,42,42,42,42,42,42,41,42,43,41,127,41,42,41,43,41,42,41,43,41,127,41,43,41,127,42,42,41,43,41,42,42,42,42,128,40}
};

/**
 * setup
 * 起動時に一度だけ実行
 */
void setup()
{
  // LED接続ピンを出力に設定
  pinMode(LED, OUTPUT);
}

/**
 * loop
 * 繰り返し実行
 */
void loop()
{
  // エアコンをON
  sendSignal(STATE_ON);

  // 5秒間スリープ
  delay(5000);

  // エアコンをOFF
  sendSignal(STATE_OFF);
 
  // 5秒間スリープ
  delay(5000);
}

// リモコン信号を送信
void sendSignal(int mode) {
  int dataSize = sizeof(data[mode]) / sizeof(data[mode][0]);
  for (int cnt = 0; cnt < dataSize; cnt++) {
    unsigned long len = data[mode][cnt]*10;
    unsigned long us = micros();
    do {
      digitalWrite(LED, (cnt%2) ? LOW : HIGH);
      delayMicroseconds(8);
      digitalWrite(LED, LOW);
      delayMicroseconds(7);
    } while (long(us + len - micros()) > 0);
  }
}
